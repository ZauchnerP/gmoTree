<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Check if the Time data frame is messy — messy_time • gmoTree</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check if the Time data frame is messy — messy_time"><meta name="description" content="Checks if the Time data frame includes both participant-related variables
and time stamp variables that appear multiple times. This may occur when
data from different oTree versions, which use different variable names,
are combined.
If desired, the function can merge these variables,
storing the data using the newer oTree version's variable names
and removing the outdated variables."><meta property="og:description" content="Checks if the Time data frame includes both participant-related variables
and time stamp variables that appear multiple times. This may occur when
data from different oTree versions, which use different variable names,
are combined.
If desired, the function can merge these variables,
storing the data using the newer oTree version's variable names
and removing the outdated variables."><meta property="og:image" content="https://zauchnerp.github.io/gmoTree/logo.png"><meta name="google-site-verification" content="lSXl2iW6yiG0KPKAVlugjOAsjyhyaTkj3xAgH0Tj_L0"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gmoTree</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.2.0-9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/codebook.html">gmoTree Codebooks</a></li>
    <li><a class="dropdown-item" href="../articles/intro_to_gmoTree.html">Introduction to gmoTree</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ZauchnerP/gmoTree/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Check if the Time data frame is messy</h1>
      <small class="dont-index">Source: <a href="https://github.com/ZauchnerP/gmoTree/blob/HEAD/R/messy_time.R" class="external-link"><code>R/messy_time.R</code></a></small>
      <div class="d-none name"><code>messy_time.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Checks if the Time data frame includes both participant-related variables
and time stamp variables that appear multiple times. This may occur when
data from different oTree versions, which use different variable names,
are combined.</p>
<p>If desired, the function can merge these variables,
storing the data using the newer oTree version's variable names
and removing the outdated variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">messy_time</span><span class="op">(</span></span>
<span>  <span class="va">oTree</span>,</span>
<span>  combine <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  epoch_time <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  participant <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  info <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-otree">oTree<a class="anchor" aria-label="anchor" href="#arg-otree"></a></dt>
<dd><p>A list of data frames that were created
by <code><a href="import_otree.html">import_otree</a></code>.</p></dd>


<dt id="arg-combine">combine<a class="anchor" aria-label="anchor" href="#arg-combine"></a></dt>
<dd><p>Logical. <code>TRUE</code> if all variables referring to epoch time
should be merged and/or all variables referring to participant code should be merged
in case data of several versions of oTree are used.</p></dd>


<dt id="arg-epoch-time">epoch_time<a class="anchor" aria-label="anchor" href="#arg-epoch-time"></a></dt>
<dd><p>Logical. <code>TRUE</code> if all variables referring to the time
stamp should be checked and merged. Only works if <code>combine = TRUE</code>.</p></dd>


<dt id="arg-participant">participant<a class="anchor" aria-label="anchor" href="#arg-participant"></a></dt>
<dd><p>Logical. <code>TRUE</code> if all variables referring to the
participant code should be checked and merged.
Only works if <code>combine = TRUE</code>.</p></dd>


<dt id="arg-info">info<a class="anchor" aria-label="anchor" href="#arg-info"></a></dt>
<dd><p>Logical. <code>TRUE</code> if a brief information on the process should
be printed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function searches for multiple variables related to the time stamp
or the participant code in the <code>$Time</code> data frame,
which can occur when data from both old and new oTree versions are used.</p>
<p>If <code>combine = FALSE</code>, the function will throw an error
if such variables are found.</p>
<p>If <code>combine = TRUE</code>, the function will not throw an error
if such variables are found.
Instead, it automatically combines the variables into new variables
and adds them to the original <code>$Time</code> data frame.
This function then returns a duplicate of the original oTree list but
with the <code>$Time</code> data frame modified.</p>
<p>The new variables are
called <code>epoch_time_completed</code> and <code>participant_code</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Set data folder first</span></span></span>
<span class="r-in"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_dir.html" class="external-link">with_dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>, <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import all oTree files in this folder and its subfolders</span></span></span>
<span class="r-in"><span><span class="va">oTree</span> <span class="op">&lt;-</span> <span class="fu"><a href="import_otree.html">import_otree</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>You have stored all_apps_wide globally but also room-specific. This function will import both of them. (Globally, the files are saved as "all_apps_wide_." Room-specific, the files are saved as "All apps - wide-" or "all_apps_wide-.") After importing the data, make sure nothing is there twice! (Advice: You may use delete_duplicate() to remove duplicate rows of all oTree data frames.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show all Time column names</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">oTree</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "session_code"               "participant_id_in_session" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "participant_code"           "page_index"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "app_name"                   "page_name"                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "epoch_time"                 "round_number"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "timeout_happened"           "is_wait_page"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "epoch_time_completed"       "session_id"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "participant__id_in_session" "participant__code"         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] "time_stamp"                 "seconds_on_page"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "subsession_pk"              "auto_submitted"            </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run function</span></span></span>
<span class="r-in"><span><span class="va">oTree</span> <span class="op">&lt;-</span> <span class="fu">messy_time</span><span class="op">(</span><span class="va">oTree</span>, combine <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show all Time column names again</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">oTree</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "session_code"               "participant_id_in_session" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "participant_code"           "page_index"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "app_name"                   "page_name"                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "round_number"               "timeout_happened"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "is_wait_page"               "epoch_time_completed"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "session_id"                 "participant__id_in_session"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "seconds_on_page"            "subsession_pk"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] "auto_submitted"            </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p><a href="impressum.html">Site notice</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

