<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a codebook for the oTree code — codebook • gmoTree</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a codebook for the oTree code — codebook"><meta name="description" content="Create a codebook of your oTree code by automatically scanning
your project folder and retrieving the information of the apps'
Constants, Subsession, Group
and Player variables."><meta property="og:description" content="Create a codebook of your oTree code by automatically scanning
your project folder and retrieving the information of the apps'
Constants, Subsession, Group
and Player variables."><meta property="og:image" content="https://zauchnerp.github.io/gmoTree/logo.png"><meta name="google-site-verification" content="lSXl2iW6yiG0KPKAVlugjOAsjyhyaTkj3xAgH0Tj_L0"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gmoTree</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/codebook.html">gmoTree Codebooks</a></li>
    <li><a class="dropdown-item" href="../articles/intro_to_gmoTree.html">Introduction to gmoTree</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ZauchnerP/gmoTree/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a codebook for the oTree code</h1>
      <small class="dont-index">Source: <a href="https://github.com/ZauchnerP/gmoTree/blob/HEAD/R/codebook.R" class="external-link"><code>R/codebook.R</code></a></small>
      <div class="d-none name"><code>codebook.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a codebook of your oTree code by automatically scanning
your project folder and retrieving the information of the apps'
<code>Constants</code>, <code>Subsession</code>, <code>Group</code>
and <code>Player</code> variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">codebook</span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  fsource <span class="op">=</span> <span class="st">"init"</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"both"</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_file <span class="op">=</span> <span class="st">"codebook"</span>,</span>
<span>  output_format <span class="op">=</span> <span class="st">"pdf_document_simple"</span>,</span>
<span>  output_open <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  app_doc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  app <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  app_rm <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  doc_info <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  settings_replace <span class="op">=</span> <span class="st">"global"</span>,</span>
<span>  user_settings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  include_cons <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_subs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  preamb <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  encoding <span class="op">=</span> <span class="st">"UTF-8"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Codebook"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"created with gmoTree"</span>,</span>
<span>  params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date <span class="op">=</span> <span class="st">"today"</span>,</span>
<span>  splitvarname <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sep_list <span class="op">=</span> <span class="st">"newline"</span>,</span>
<span>  initial <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Character string. Path of the oTree experiment.</p></dd>


<dt id="arg-fsource">fsource<a class="anchor" aria-label="anchor" href="#arg-fsource"></a></dt>
<dd><p>Character string. <code>"init"</code> if information should be taken
from the <code>init.py</code> files (newer oTree code with 5.x
format). <code>"models"</code>
(or <code>"model"</code>) if the information
should be taken from the <code>models.py</code> files
(older oTree code with 3.x format).</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>Character string. <code>"list"</code> if the output should contain a
list of variables and their information. <code>"file"</code> if the output
should be a file such as a Word or PDF file.
<code>"both"</code> if the output should contain a file and a list.</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>Character string. The absolute path where
the function's output will be saved.
Only absolute paths are allowed for this parameter.
Relative paths can be specified in the <code>output_file</code> parameter.</p></dd>


<dt id="arg-output-file">output_file<a class="anchor" aria-label="anchor" href="#arg-output-file"></a></dt>
<dd><p>Character string.
The name of the output file generated by the function.
The file name can be provided with or without an extension.
Relative paths are also allowed in the file name.</p></dd>


<dt id="arg-output-format">output_format<a class="anchor" aria-label="anchor" href="#arg-output-format"></a></dt>
<dd><p>Character string.
Specifies the format of the file output.
This value is passed to the <code>output_format</code>
argument of <a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render</a>.
Allowed options are: <code>"html_document"</code>, <code>"word_document"</code>, <code>
"odt_document"</code>, <code>"rtf_document"</code>, <code>"md_document"</code>, <code>
"latex_document"</code>, <code>"pdf_document"</code>, <code>"pdf_document_simple"</code>,
or their short forms <code>"html"</code>, <code>"word"</code>, <code>"odt"</code>, <code>
"rtf"</code>, <code>"md"</code>, <code>"latex"</code>, <code>"pdf"</code>, <code>"pdf_simple"</code>.
Important: The <code>"pdf_document"</code> format uses <code>xelatex</code> for
PDF generation.
If your document does not require advanced LaTeX features,
it is recommended to use <code>"pdf_document_simple"</code>.</p></dd>


<dt id="arg-output-open">output_open<a class="anchor" aria-label="anchor" href="#arg-output-open"></a></dt>
<dd><p>Logical. <code>TRUE</code> if file output should
be opened after creation.</p></dd>


<dt id="arg-app-doc">app_doc<a class="anchor" aria-label="anchor" href="#arg-app-doc"></a></dt>
<dd><p>Logical. <code>TRUE</code> if app documentation should be
included in the output file.</p></dd>


<dt id="arg-app">app<a class="anchor" aria-label="anchor" href="#arg-app"></a></dt>
<dd><p>Character string or character vector.
Name of the included app(s).
Default is to use all apps.
Cannot be used simultaneously with <code>app_rm</code>.</p></dd>


<dt id="arg-app-rm">app_rm<a class="anchor" aria-label="anchor" href="#arg-app-rm"></a></dt>
<dd><p>Character string or character vector.
Name of the excluded app(s).
Default is to exclude no apps.
Cannot be used simultaneously with <code>app</code>.</p></dd>


<dt id="arg-doc-info">doc_info<a class="anchor" aria-label="anchor" href="#arg-doc-info"></a></dt>
<dd><p>Logical. <code>TRUE</code> if a message with information on all
variables without documentation should also be returned. <code>FALSE</code> if
this message should be suppressed.</p></dd>


<dt id="arg-sort">sort<a class="anchor" aria-label="anchor" href="#arg-sort"></a></dt>
<dd><p>Character vector. Vector that specifies the order of
the apps in the codebook.</p></dd>


<dt id="arg-settings-replace">settings_replace<a class="anchor" aria-label="anchor" href="#arg-settings-replace"></a></dt>
<dd><p>Character string or <code>NULL</code>.
Specifies how to handle references to settings variables.
Use <code>"global"</code> to replace references with the global settings variables
defined in <code>settings.py</code>.
Use <code>"user"</code> to replace references with the variables
provided in the <code>user_settings</code> argument.
Use <code>NULL</code> to leave references to settings variables unchanged.
Caution: This function does not use variables defined
in <code>SESSION_CONFIGS</code>.
If you vary settings variables in <code>SESSION_CONFIGS</code>,
set <code>settings_replace</code> to <code>"user"</code> and manually replace
them using the <code>user_</code><code>settings</code> argument.</p></dd>


<dt id="arg-user-settings">user_settings<a class="anchor" aria-label="anchor" href="#arg-user-settings"></a></dt>
<dd><p>List. List of variables in the <code>settings.py</code> file
that are used to replace setting variable references.
This is only used if <code>settings_replace = "user"</code> and should be used when
setting variables are defined within the <code>SESSION_CONFIGS</code>.</p></dd>


<dt id="arg-include-cons">include_cons<a class="anchor" aria-label="anchor" href="#arg-include-cons"></a></dt>
<dd><p>Logical.
<code>TRUE</code> if there should be a section for the <code>Constants</code> variables
in the codebook.</p></dd>


<dt id="arg-include-subs">include_subs<a class="anchor" aria-label="anchor" href="#arg-include-subs"></a></dt>
<dd><p>Logical.
<code>TRUE</code> if there should be a section for the <code>Subsession</code> variables
in the codebook.</p></dd>


<dt id="arg-preamb">preamb<a class="anchor" aria-label="anchor" href="#arg-preamb"></a></dt>
<dd><p>Deprecated. <code>preamb = TRUE</code> is no
longer supported. Please remove preambles from your old codebooks.</p></dd>


<dt id="arg-encoding">encoding<a class="anchor" aria-label="anchor" href="#arg-encoding"></a></dt>
<dd><p>Character string. Encoding of the created Markdown file.
As in <a href="https://rdrr.io/pkg/knitr/man/knit.html" class="external-link">knitr::knit</a>, this argument is
always assumed to be <code>UTF-8</code>
and ignored.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Character string. Title of output file.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Character string. Subtitle of output file.</p></dd>


<dt id="arg-params">params<a class="anchor" aria-label="anchor" href="#arg-params"></a></dt>
<dd><p>List.
List of variable name and value pairs to be passed to the RmD file.
Only relevant if argument output <code>"file"</code> or <code>"both"</code> if chosen.</p></dd>


<dt id="arg-date">date<a class="anchor" aria-label="anchor" href="#arg-date"></a></dt>
<dd><p>Character string or <code>NULL</code>.
Date that is passed to the Rmd file.
Either <code>"today"</code>, <code>NULL</code>, or a user defined date.
Only relevant if argument output <code>"file"</code> or <code>"both"</code> if chosen.</p></dd>


<dt id="arg-splitvarname">splitvarname<a class="anchor" aria-label="anchor" href="#arg-splitvarname"></a></dt>
<dd><p>Logical. <code>TRUE</code> if long variable names should be
split across multiple lines in the output file tables.
If <code>FALSE</code>, table columns should adjust to fit the longest
variable names.</p></dd>


<dt id="arg-sep-list">sep_list<a class="anchor" aria-label="anchor" href="#arg-sep-list"></a></dt>
<dd><p>Character string. Determines how sub-lists are displayed
in the file output. Use <code>"newline"</code> to separate sub-lists with
newline characters (<code>\\n</code>), or <code>"vector"</code> to display them as
strings in <code>c(...)</code> format.</p></dd>


<dt id="arg-initial">initial<a class="anchor" aria-label="anchor" href="#arg-initial"></a></dt>
<dd><p>Logical. <code>TRUE</code> if initial values should be included
in the output file. <code>FALSE</code> if they should not be included.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function returns two main types of outputs:</p>
<p>(a) a list of variables along with their information</p>
<p>(b) a file containing the codebook for the experiment</p>
<p>If <code>doc_info</code> is <code>TRUE</code> it also returns a
message containing the names of
all variables that have no documentation.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This code works only when dictionaries are not used (for
example, in the session configurations in <code>settings.py</code>).</p>
<p>Caution 1: Multiline comments are ignored, meaning that all variables
commented out in this manner will nevertheless be included in the codebook.
In contrast, variables commented out with line comments will not
appear in the codebook.</p>
<p>Caution 2: If there are commas in the value strings, they might be
used to split the text. Please manually insert a backslash symbol
in front of the commas to avoid that (i.e., escape them).
E.g. <code>"Yes, I will"</code> -&gt; <code>"Yes\, I will"</code>.</p>
<p>Caution 3: This code cannot interpret variables that were imported from other
files (for example CSV files) and that have special formatting
included (e.g., special string formatting in Python such
as <code>float(1.4)</code> to represent a float number).</p>
<p>Caution 4: This code was developed and tested with basic oTree codes
and has not been verified for compatibility with oTree versions
later than 5.4.0.
If you experience issues with newer versions or more complex code structures,
please open an issue on GitHub.</p>
<p>Caution 5: Custom exports and variables from
the <code>Participant</code> <code>Session</code> classes
are not part of the codebook. Also built-in variables
are not presented in the codebook.</p>
<p>Further info: <code>None</code> values are presented
as <code>"None"</code> (i.e. as a string)
in the list and the file output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># The examples use a slightly modified version of the official oTree</span></span></span>
<span class="r-in"><span><span class="co"># sample codes.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make a codebook and resort the apps</span></span></span>
<span class="r-in"><span><span class="va">combined_codebook</span> <span class="op">&lt;-</span> <span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ocode_new"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"list"</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"init"</span>,</span></span>
<span class="r-in"><span>  doc_info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show the structure of the codebook</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">combined_codebook</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ settings            :List of 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ bargaining          :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ bertrand            :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ common_value_auction:List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ cournot             :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dictator            :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ guess_two_thirds    :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ matching_pennies    :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ payment_info        :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ prisoner            :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ public_goods_simple :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ survey              :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ traveler_dilemma    :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ trust               :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ trust_simple        :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ volunteer_dilemma   :List of 5</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">combined_codebook</span><span class="op">$</span><span class="va">bargaining</span><span class="op">$</span><span class="va">Player</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ request:List of 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ level2 :List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ level3 :List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ level  :List of 3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make a codebook with only the "bargaining" app</span></span></span>
<span class="r-in"><span><span class="va">combined_codebook</span> <span class="op">&lt;-</span> <span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ocode_new"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"list"</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"init"</span>,</span></span>
<span class="r-in"><span>  app <span class="op">=</span> <span class="st">"bargaining"</span>,</span></span>
<span class="r-in"><span>  doc_info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show the structure of the codebook</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">combined_codebook</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ settings  :List of 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ bargaining:List of 5</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">combined_codebook</span><span class="op">$</span><span class="va">bargaining</span><span class="op">$</span><span class="va">Player</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ request:List of 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ level2 :List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ level3 :List of 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ level  :List of 3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make a codebook with all but the "bargaining" app</span></span></span>
<span class="r-in"><span><span class="va">combined_codebook</span> <span class="op">&lt;-</span> <span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ocode_new"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"list"</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"init"</span>,</span></span>
<span class="r-in"><span>  app_rm <span class="op">=</span> <span class="st">"bargaining"</span>,</span></span>
<span class="r-in"><span>  doc_info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show the structure of the codebook</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">combined_codebook</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ settings            :List of 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ bertrand            :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ common_value_auction:List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ cournot             :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dictator            :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ guess_two_thirds    :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ matching_pennies    :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ payment_info        :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ prisoner            :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ public_goods_simple :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ survey              :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ traveler_dilemma    :List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ trust               :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ trust_simple        :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ volunteer_dilemma   :List of 5</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">combined_codebook</span><span class="op">$</span><span class="va">bargaining</span><span class="op">$</span><span class="va">Player</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  NULL</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use oTree code in 3.x format</span></span></span>
<span class="r-in"><span><span class="va">combined_codebook</span> <span class="op">&lt;-</span> <span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ocode_z"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"model"</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"list"</span>,</span></span>
<span class="r-in"><span>  doc_info <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Some variables or code parts contain code that is too complex for this function. Hence, this function might have overseen important variables and references to them. Found in:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> &gt; $rankaversion$Constants (read_csv)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> &gt; $rankend$Constants (read_csv)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> &gt; $settings$showupToken (float)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> &gt; $end$Constants$showupToken (float)</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> &gt; $end$Constants$showupTokenTest (float)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show the structure of the codebook</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">combined_codebook</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ settings    :List of 20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ end         :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ rankaversion:List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ rankend     :List of 4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show information on missing documentation or complex code</span></span></span>
<span class="r-in"><span><span class="va">combined_codebook</span> <span class="op">&lt;-</span> <span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ocode_new"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"init"</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"list"</span>,</span></span>
<span class="r-in"><span>  app_rm <span class="op">=</span> <span class="st">"bargaining"</span>,</span></span>
<span class="r-in"><span>  doc_info <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Variables without documentation, label, or verbose name:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $bertrand$Group$winning_price</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $bertrand$Player$is_winner</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $common_value_auction$Group$highest_bid</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $cournot$Group$unit_price</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $dictator$Player$gender</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $guess_two_thirds$Group$two_thirds_avg</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $guess_two_thirds$Group$best_guess</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $guess_two_thirds$Group$num_winners</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $guess_two_thirds$Player$is_winner</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $matching_pennies$Player$is_winner</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $public_goods_simple$Group$total_contribution</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $public_goods_simple$Group$individual_share</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $traveler_dilemma$Group$lower_claim</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $traveler_dilemma$Player$adjustment</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> &gt; $volunteer_dilemma$Group$num_volunteers</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a codebook PDF with authors' names and todays' date</span></span></span>
<span class="r-in"><span><span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ocode_z"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"init"</span>,</span></span>
<span class="r-in"><span>  doc_info <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"file"</span>,</span></span>
<span class="r-in"><span>  output_format <span class="op">=</span> <span class="st">"pdf_document"</span>,</span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="st">"today"</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"My Codebook"</span>,</span></span>
<span class="r-in"><span>  subtitle <span class="op">=</span> <span class="st">"codebook created with gmoTree"</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>author <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Max Mustermann"</span>, <span class="st">"John Doe"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a codebook PDF and save it in a subfolder of the</span></span></span>
<span class="r-in"><span><span class="co"># current folder:</span></span></span>
<span class="r-in"><span><span class="co"># "C:/Users/username/folder/R_analyses/cb/cb.pdf"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># "C:/Users/username/folder/R_analyses"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">"cb"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">combined_codebook</span> <span class="op">&lt;-</span> <span class="fu">gmoTree</span><span class="fu">::</span><span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="st">"C:/Users/username/folder/R_analyses/oTree"</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"models"</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>  output_file <span class="op">=</span> <span class="st">"cb/cb.pdf"</span>,</span></span>
<span class="r-in"><span>  output_format <span class="op">=</span> <span class="st">"pdf_document"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can also omit *.pdf after the file name</span></span></span>
<span class="r-in"><span><span class="va">combined_codebook</span> <span class="op">&lt;-</span> <span class="fu">gmoTree</span><span class="fu">::</span><span class="fu">codebook</span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="st">"C:/Users/username/folder/R_analyses/oTree"</span>,</span></span>
<span class="r-in"><span>  fsource <span class="op">=</span> <span class="st">"models"</span>,</span></span>
<span class="r-in"><span>  output <span class="op">=</span> <span class="st">"both"</span>,</span></span>
<span class="r-in"><span>  output_file <span class="op">=</span> <span class="st">"cb/cb"</span>,</span></span>
<span class="r-in"><span>  output_format <span class="op">=</span> <span class="st">"pdf_document"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patricia F. Zauchner.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

