<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Check if the Chats data frame is messy — messy_chat • gmoTree</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Check if the Chats data frame is messy — messy_chat"><meta property="og:description" content="Check if the Chats data frame includes both
session-related variables and participant-related variables that
appear multiple times. This may occur when data from different
oTree versions, which use different variable names, are combined.
If desired, the function can merge these variables,
storing the data using the newer oTree version's variable names
and removing the outdated variables."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gmoTree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro_to_gmoTree.html">Introduction to gmoTree</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ZauchnerP/gmoTree/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check if the Chats data frame is messy</h1>
    <small class="dont-index">Source: <a href="https://github.com/ZauchnerP/gmoTree/blob/HEAD/R/messy_chat.R" class="external-link"><code>R/messy_chat.R</code></a></small>
    <div class="hidden name"><code>messy_chat.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Check if the Chats data frame includes both
session-related variables and participant-related variables that
appear multiple times. This may occur when data from different
oTree versions, which use different variable names, are combined.</p>
<p>If desired, the function can merge these variables,
storing the data using the newer oTree version's variable names
and removing the outdated variables.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">messy_chat</span><span class="op">(</span></span>
<span>  <span class="va">oTree</span>,</span>
<span>  combine <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  session <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  participant <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  info <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>oTree</dt>
<dd><p>A list of data frames that were created by import_otree().</p></dd>


<dt>combine</dt>
<dd><p>Logical. TRUE if all variables referring to
the session code should be merged and/or all variables referring
to participant code should be merged in case data of several versions
of oTree are used.</p></dd>


<dt>session</dt>
<dd><p>Logical. TRUE if all variables referring to the session code
should be checked and merged. Merging only works if combine = TRUE.</p></dd>


<dt>participant</dt>
<dd><p>Logical. TRUE if all variables referring to the
participant code should be checked and merged. Merging only works if
combine = TRUE.</p></dd>


<dt>info</dt>
<dd><p>Logical. TRUE if a brief information on the process should
be printed.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>This function returns an oTree list of data frames that is
an exact copy of the original oTree list of data frames but - if the user
wishes to do so - combines the participant code and session code
variables in the Chats data frame if several variables are referring to
those because of the
combination of different oTree versions. The final variables are called
participant_code and session_code.</p>


<p>If combine = FALSE, the function only checks for the existence of several
variables referring to the participant code and session code and throws an
error if yes.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Set data folder first</span></span></span>
<span class="r-in"><span><span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_dir.html" class="external-link">with_dir</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span>, <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import all oTree files in this folder and its subfolders</span></span></span>
<span class="r-in"><span><span class="va">oTree</span> <span class="op">&lt;-</span> <span class="fu"><a href="import_otree.html">import_otree</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>You have stored all_apps_wide globally but also room-specific. This function will import both of them. (Globally, the files are saved as "all_apps_wide_." Room-specific, the files are saved as "All apps - wide-" or "all_apps_wide-.") After importing the data, make sure nothing is there twice! (Advice: You may use delete_duplicate() to remove duplicate rows of all oTree data frames.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show all Chats column names</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">oTree</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "session_code"               "id_in_session"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "participant_code"           "channel"                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "nickname"                   "body"                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "timestamp"                  "participant__session__code"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "participant__session_id"    "participant__id_in_session"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "participant__code"         </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run function</span></span></span>
<span class="r-in"><span><span class="va">oTree</span> <span class="op">&lt;-</span> <span class="fu">messy_chat</span><span class="op">(</span><span class="va">oTree</span>, combine <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show all Chats column names again</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">oTree</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "session_code"               "id_in_session"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "participant_code"           "channel"                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "nickname"                   "body"                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "timestamp"                  "participant__session_id"   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [9] "participant__id_in_session"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p><a href="impressum.html">Site notice</a></p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

