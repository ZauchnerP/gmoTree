<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to gmoTree • gmoTree</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to gmoTree">
<meta property="og:description" content="gmoTree">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gmoTree</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro_to_gmoTree.html">Introduction to gmoTree</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ZauchnerP/gmoTree/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to gmoTree</h1>
                        <h4 data-toc-skip class="author">Patricia F.
Zauchner</h4>
            
            <h4 data-toc-skip class="date">2023-10-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ZauchnerP/gmoTree/blob/HEAD/vignettes/intro_to_gmoTree.Rmd" class="external-link"><code>vignettes/intro_to_gmoTree.Rmd</code></a></small>
      <div class="hidden name"><code>intro_to_gmoTree.Rmd</code></div>

    </div>

    
    
<p>Handling data from online experiments made with oTree (<a href="https://www.otree.org/" class="external-link uri">https://www.otree.org/</a>)
can be challenging, especially when dealing with complex experimental
designs that span multiple sessions and return numerous files that must
be combined. This is where the gmoTree package comes in. gmoTree is not
an official package of the oTree team but is built to complement the
oTree open-source platform. It helps streamline the data processing
workflow by providing tools designed to import, merge, and manage data
from oTree experiments.</p>
<div class="section level2">
<h2 id="importing-and-cleaning-up-data">Importing and cleaning up data<a class="anchor" aria-label="anchor" href="#importing-and-cleaning-up-data"></a>
</h2>
<div class="section level3">
<h3 id="background-information-on-the-data-downloaded-by-otree">Background information on the data downloaded by oTree<a class="anchor" aria-label="anchor" href="#background-information-on-the-data-downloaded-by-otree"></a>
</h3>
<p>An oTree experiment is structured around one or more modular units
called ‘apps,’ which encompass one or multiple ‘pages.’ Data generated
from each app can be downloaded individually, offering the flexibility
to analyze separate components of the experiment. For an
all-encompassing view of the experiment, the data from all apps can also
be downloaded in a comprehensive file labeled ‘all_apps_wide.’</p>
<p>In addition to the aforementioned app data and the cumulative
all_apps_wide file, oTree generates a file with time stamps for every
page. A file documenting all chat interactions is also provided if the
experiment includes one or multiple chat rooms. In newer oTree versions,
also custom data can be downloaded.</p>
<p>When an oTree experiment is run across different databases, this set
of data files is downloaded for each database. This would include
individual app data files, the all_apps_wide file, a file for the time
stamps of every page, and a chat log file if a chat room was used in the
experiment.</p>
<p>The gmoTree package’s functionality lies in its ability to load and
aggregate all of these files with ease.</p>
</div>
<div class="section level3">
<h3 id="import_otree">import_otree()<a class="anchor" aria-label="anchor" href="#import_otree"></a>
</h3>
<p>We can import all oTree data and combine them into a list of data
frames using the <code>import otree()</code> function. Each data frame
is named according to its associated app, and the function generates an
accompanying info list that details essential information regarding the
imported files, such as any deleted cases. This information list is
updated as we use other functions within the package.</p>
<p>It is worth noting that even if we only use one all_apps_wide file,
we should still load the data with <code>import otree()</code> if we
want to access other functions within the gmoTree package.
Alternatively, we could reproduce the structure created by this function
by hand. The following example shows how to import oTree data, the
structure of the oTree list of data frames after importing the data, and
all of the information provided in <code>oTree$info</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get path to the package data</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/exp_data_5.4.0"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Import without specifications</span></span>
<span><span class="co"># Import all oTree files in this folder and its subfolders</span></span>
<span><span class="va">otree</span> <span class="op">&lt;-</span> <span class="fu">gmoTree</span><span class="fu">::</span><span class="fu"><a href="../reference/import_otree.html">import_otree</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span>
<span><span class="co">## Warning in gmoTree::import_otree(path = path): You have stored all_apps_wide</span></span>
<span><span class="co">## globally but also room-specific. This function will import both of them.</span></span>
<span><span class="co">## (Globally, the files are saved as "all_apps_wide_." Room-specific, the files</span></span>
<span><span class="co">## are saved as "All apps - wide-" or "all_apps_wide-.") After importing the data,</span></span>
<span><span class="co">## make sure nothing is there twice! (Advice: You may use delete_duplicate() to</span></span>
<span><span class="co">## remove duplicate rows of all oTree data frames.</span></span>
<span></span>
<span><span class="co"># Check the structure of the oTree list of data frames</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">otree</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">## List of 8</span></span>
<span><span class="co">##  $ all_apps_wide:'data.frame':   12 obs. of  60 variables:</span></span>
<span><span class="co">##  $ info         :List of 2</span></span>
<span><span class="co">##  $ chatapp      :'data.frame':   8 obs. of  24 variables:</span></span>
<span><span class="co">##  $ dictator     :'data.frame':   48 obs. of  25 variables:</span></span>
<span><span class="co">##  $ start        :'data.frame':   8 obs. of  24 variables:</span></span>
<span><span class="co">##  $ survey       :'data.frame':   8 obs. of  29 variables:</span></span>
<span><span class="co">##  $ Time         :'data.frame':   77 obs. of  10 variables:</span></span>
<span><span class="co">##  $ Chats        :'data.frame':   6 obs. of  7 variables:</span></span>
<span></span>
<span><span class="co"># The initial info list</span></span>
<span><span class="va">otree</span><span class="op">$</span><span class="va">info</span></span>
<span><span class="co">## $imported_files</span></span>
<span><span class="co">## [1] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/ChatMessages-2023-05-16.csv" </span></span>
<span><span class="co">## [2] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/PageTimes-2023-05-16.csv"    </span></span>
<span><span class="co">## [3] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/survey_2023-05-16.csv"       </span></span>
<span><span class="co">## [4] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/start_2023-05-16.csv"        </span></span>
<span><span class="co">## [5] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/dictator_2023-05-16.csv"     </span></span>
<span><span class="co">## [6] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/dictator_2023-05-00.csv"     </span></span>
<span><span class="co">## [7] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/chatapp_2023-05-16.csv"      </span></span>
<span><span class="co">## [8] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/all_apps_wide_2023-05-16.csv"</span></span>
<span><span class="co">## [9] "C:/Users/pzauchner/AppData/Local/R/win-library/4.3/gmoTree/extdata/exp_data_5.4.0/all_apps_wide-2023-05-16.csv"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $initial_n</span></span>
<span><span class="co">## [1] 12</span></span></code></pre></div>
<p>Caution: This function only works if the oTree data is saved using
the typical oTree file pattern!</p>
</div>
<div class="section level3">
<h3 id="delete_duplicate">delete_duplicate()<a class="anchor" aria-label="anchor" href="#delete_duplicate"></a>
</h3>
<p>Sometimes, the same data is imported several times. This could happen
for several reasons. First, one data set might be part of another
because of the download of temporarily stored data before downloading
the final data frame. Second, if room-specific and global data is
imported, the data in the <code>all_apps_wide</code> data frame are
there two times. Third, the same data is stored in several imported
folders. The function <code><a href="../reference/delete_duplicate.html">delete_duplicate()</a></code> deletes duplicate
data from all apps and <code>all_apps_wide</code>. It, however, does not
change the <code>Time</code> and <code>Chats</code> data frames.</p>
<p>Before running the function, let us first check the number of
participant codes and the initial count before executing the
<code><a href="../reference/delete_duplicate.html">delete_duplicate()</a></code> function. In the imported
<code>all_apps_wide</code> data frame, we have 12 participant codes.
However, among these, only 8 are unique, which indicates the presence of
duplicate data. The <code>info</code> data frame suggests that there are
initially 12 entries.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initial check before deletion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.code</span><span class="op">)</span></span>
<span><span class="co">## [1] 12</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.code</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] 8</span></span>
<span><span class="va">otree</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">initial_n</span></span>
<span><span class="co">## [1] 12</span></span></code></pre></div>
<p>To remove these duplicates, we employ the
<code><a href="../reference/delete_duplicate.html">delete_duplicate()</a></code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete duplicate cases</span></span>
<span><span class="va">otree</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delete_duplicate.html">delete_duplicate</a></span><span class="op">(</span><span class="va">otree</span><span class="op">)</span></span></code></pre></div>
<p>Please note that details about the deleted rows are not added to a
list of deleted cases. This is because the list might be used for
analysis, and this function mainly focuses on cleaning up an untidy data
import. However, the count in <code>info$initial_n</code> is adjusted
accordingly.</p>
<p>After the deletion operation, we should find that all participant
codes are unique, and the count <code>info$initial_n</code> matches the
number of unique participant codes.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check participant codes and initial_n after deletion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.code</span><span class="op">)</span></span>
<span><span class="co">## [1] 8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.code</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] 8</span></span>
<span><span class="va">otree</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">initial_n</span></span>
<span><span class="co">## [1] 8</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dealing-with-messy-chats-and-time-data-frames">Dealing with messy Chats and Time data frames<a class="anchor" aria-label="anchor" href="#dealing-with-messy-chats-and-time-data-frames"></a>
</h3>
<p>If we combine data from experiments that ran on different versions of
oTree, it might happen that there are several variables referring to the
same attribute in the <code>Time</code> and in the <code>Chats</code>
data frames. The functions <code><a href="../reference/messy_chat.html">messy_chat()</a></code> and
<code><a href="../reference/messy_time.html">messy_time()</a></code> integrate the corresponding variables if used
with the argument <code>combine = TRUE</code>.</p>
<p>To show an example, let us first load data from different versions of
oTree.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import data from different oTree versions</span></span>
<span><span class="va">otree_all</span> <span class="op">&lt;-</span> <span class="fu">gmoTree</span><span class="fu">::</span><span class="fu"><a href="../reference/import_otree.html">import_otree</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"gmoTree"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## Warning in gmoTree::import_otree(path = system.file("extdata", package =</span></span>
<span><span class="co">## "gmoTree")): You have stored all_apps_wide globally but also room-specific.</span></span>
<span><span class="co">## This function will import both of them. (Globally, the files are saved as</span></span>
<span><span class="co">## "all_apps_wide_." Room-specific, the files are saved as "All apps - wide-" or</span></span>
<span><span class="co">## "all_apps_wide-.") After importing the data, make sure nothing is there twice!</span></span>
<span><span class="co">## (Advice: You may use delete_duplicate() to remove duplicate rows of all oTree</span></span>
<span><span class="co">## data frames.</span></span>
<span></span>
<span><span class="co"># Check names of Time data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">otree_all</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">##  [1] "session_code"               "participant_id_in_session" </span></span>
<span><span class="co">##  [3] "participant_code"           "page_index"                </span></span>
<span><span class="co">##  [5] "app_name"                   "page_name"                 </span></span>
<span><span class="co">##  [7] "epoch_time"                 "round_number"              </span></span>
<span><span class="co">##  [9] "timeout_happened"           "is_wait_page"              </span></span>
<span><span class="co">## [11] "epoch_time_completed"       "session_id"                </span></span>
<span><span class="co">## [13] "participant__id_in_session" "participant__code"         </span></span>
<span><span class="co">## [15] "time_stamp"                 "seconds_on_page"           </span></span>
<span><span class="co">## [17] "subsession_pk"              "auto_submitted"</span></span>
<span></span>
<span><span class="co"># Check names of Chats data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">otree_all</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">##  [1] "session_code"               "id_in_session"             </span></span>
<span><span class="co">##  [3] "participant_code"           "channel"                   </span></span>
<span><span class="co">##  [5] "nickname"                   "body"                      </span></span>
<span><span class="co">##  [7] "timestamp"                  "participant__session__code"</span></span>
<span><span class="co">##  [9] "participant__session_id"    "participant__id_in_session"</span></span>
<span><span class="co">## [11] "participant__code"</span></span></code></pre></div>
<p>Now we can run the functions <code><a href="../reference/messy_time.html">messy_time()</a></code> and
<code><a href="../reference/messy_chat.html">messy_chat()</a></code>. The warning messages are part of the expected
output, indicating precisely which variables were combined. There is no
need for concern when we see them. However, you can also turn them off
using <code>info = FALSE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">otree_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/messy_time.html">messy_time</a></span><span class="op">(</span><span class="va">otree_all</span>,</span>
<span>                        combine <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        info <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## Warning in messy_time(otree_all, combine = TRUE, info = TRUE): More than one variable referred to the time stamp. You asked for combining them with the argument combine = TRUE. Variable(s) "epoch_time," and "time_stamp" was/were integrated to variable "epoch_time_completed" and deleted afterward.</span></span>
<span><span class="co">## More than one variable referred to the participant code. You asked for combining them with the argument combine = TRUE. Variable "participant__code" was integrated into variable "participant_code" The variable "participant__code" was deleted afterward.</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">otree_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/messy_chat.html">messy_chat</a></span><span class="op">(</span><span class="va">otree_all</span>,</span>
<span>                        combine <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        info <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## Warning in messy_chat(otree_all, combine = TRUE, info = TRUE): More than one variable referred to the session code in your Chats data frame. You asked for combining them with the argument combine = TRUE. Therefore, variable "participant__session__code" was integrated into variable "session_code." The variable "participant__session__code" was deleted afterward.</span></span>
<span><span class="co">## More than one variable referred to the session code in your Chats data frame. You asked for combining them with the argument combine = TRUE. Therefore, variable "participant__code" was integrated into variable "participant_code" The variable "participant__code" was deleted afterward.</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check names of Time data frame again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">otree_all</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">##  [1] "session_code"               "participant_id_in_session" </span></span>
<span><span class="co">##  [3] "participant_code"           "page_index"                </span></span>
<span><span class="co">##  [5] "app_name"                   "page_name"                 </span></span>
<span><span class="co">##  [7] "round_number"               "timeout_happened"          </span></span>
<span><span class="co">##  [9] "is_wait_page"               "epoch_time_completed"      </span></span>
<span><span class="co">## [11] "session_id"                 "participant__id_in_session"</span></span>
<span><span class="co">## [13] "seconds_on_page"            "subsession_pk"             </span></span>
<span><span class="co">## [15] "auto_submitted"</span></span>
<span></span>
<span><span class="co"># Check names of Chats data frame again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">otree_all</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">## [1] "session_code"               "id_in_session"             </span></span>
<span><span class="co">## [3] "participant_code"           "channel"                   </span></span>
<span><span class="co">## [5] "nickname"                   "body"                      </span></span>
<span><span class="co">## [7] "timestamp"                  "participant__session_id"   </span></span>
<span><span class="co">## [9] "participant__id_in_session"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="dealing-with-dropouts-and-deleting-cases">Dealing with dropouts and deleting cases<a class="anchor" aria-label="anchor" href="#dealing-with-dropouts-and-deleting-cases"></a>
</h2>
<div class="section level3">
<h3 id="show_dropouts">show_dropouts()<a class="anchor" aria-label="anchor" href="#show_dropouts"></a>
</h3>
<p>Sometimes, participants drop out of experiments. To get an overview
of the dropouts, we can use the function <code><a href="../reference/show_dropouts.html">show_dropouts()</a></code>.
It creates three data frames/tables with information on the participants
that did not finish at (a) certain app(s) or page(s).</p>
<p>First, the function <code><a href="../reference/show_dropouts.html">show_dropouts()</a></code> creates a data frame
<code>full</code> that provides specific information on the apps and
pages where participants left the experiment prematurely. Additionally,
this data frame indicates which apps were affected by the participants
who dropped out.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Show everyone that has not finished with the app "survey"</span></span>
<span><span class="va">dropout_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/show_dropouts.html">show_dropouts</a></span><span class="op">(</span><span class="va">otree</span>, <span class="st">"survey"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dropout_list</span><span class="op">$</span><span class="va">full</span><span class="op">)</span></span>
<span><span class="co">##   participant.code session.code  end_app        end_page</span></span>
<span><span class="co">## 1         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 2         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 3         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 4         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 5         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 6         dhgisush     2wlrl5kb dictator           Offer</span></span>
<span><span class="co">##                                                reason</span></span>
<span><span class="co">## 1 Experiment not completed. Noticed at: all_apps_wide</span></span>
<span><span class="co">## 2       Experiment not completed. Noticed at: chatapp</span></span>
<span><span class="co">## 3      Experiment not completed. Noticed at: dictator</span></span>
<span><span class="co">## 4         Experiment not completed. Noticed at: start</span></span>
<span><span class="co">## 5        Experiment not completed. Noticed at: survey</span></span>
<span><span class="co">## 6 Experiment not completed. Noticed at: all_apps_wide</span></span></code></pre></div>
<p>Second, the function <code><a href="../reference/show_dropouts.html">show_dropouts()</a></code> also generates a
smaller data frame <code>unique</code> that only includes information on
each person once.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dropout_list</span><span class="op">$</span><span class="va">unique</span></span>
<span><span class="co">##    participant.code session.code  end_app        end_page</span></span>
<span><span class="co">## 1          1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 6          dhgisush     2wlrl5kb dictator           Offer</span></span>
<span><span class="co">## 11         j2g9mcaf     jk9ekpl0 dictator    Introduction</span></span>
<span><span class="co">## 16         p6m495xi     2wlrl5kb dictator    Introduction</span></span>
<span><span class="co">##                      reason</span></span>
<span><span class="co">## 1  Experiment not completed</span></span>
<span><span class="co">## 6  Experiment not completed</span></span>
<span><span class="co">## 11 Experiment not completed</span></span>
<span><span class="co">## 16 Experiment not completed</span></span></code></pre></div>
<p>Third, the function <code><a href="../reference/show_dropouts.html">show_dropouts()</a></code> furthermore creates
a table <code>all_end</code>, which contains information on all
participants and where they ended the experiment. The columns contain
the names of the pages of the experiment; the rows contain the names of
the apps.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dropout_list</span><span class="op">$</span><span class="va">all_end</span></span>
<span><span class="co">##           </span></span>
<span><span class="co">##            Demographics Introduction Offer ResultsWaitPage</span></span>
<span><span class="co">##   dictator            0            2     1               1</span></span>
<span><span class="co">##   survey              4            0     0               0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="delete_dropouts">delete_dropouts()<a class="anchor" aria-label="anchor" href="#delete_dropouts"></a>
</h3>
<p>Normally, we want to exclude dropouts from our analysis. The function
<code><a href="../reference/delete_dropouts.html">delete_dropouts()</a></code> removes all data related to participants
who prematurely terminated the experiment from the data frames in the
oTree list, except the data contained within the info list and the
<code>Chats</code> data frame. I highly recommend personally deleting
the chat data because it can occasionally become unintelligible once one
person’s input is removed. Therefore, this function does not delete the
chat input of the participants who dropped out of the experiment.</p>
<p>Before running the example, let us first check the row numbers of
some data frames.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, check some row numbers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span></span>
<span><span class="co">## [1] 8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">survey</span><span class="op">)</span></span>
<span><span class="co">## [1] 8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">## [1] 77</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">## [1] 6</span></span></code></pre></div>
<p>When we run the function <code><a href="../reference/delete_dropouts.html">delete_dropouts()</a></code> and check the
row numbers again, we see that cases were deleted in each data frame but
not in the <code>Chats</code> data frame.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete all cases that didn't end the experiment on the page "Demographics"</span></span>
<span><span class="co"># within the app "survey"</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delete_dropouts.html">delete_dropouts</a></span><span class="op">(</span><span class="va">otree</span>,</span>
<span>                         final_apps <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"survey"</span><span class="op">)</span>,</span>
<span>                         final_pages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Demographics"</span><span class="op">)</span>,</span>
<span>                         info <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## 4 case(s) deleted</span></span>
<span><span class="co">## Dropouts are deleted from all data frames. Except: The list of oTree data frames includes a chat. As the interpretation of chat data depends on how participants engage with each other, the data must be deleted with more care than deleting data in other apps. Hence, this function does not delete data in this data frame. Please do this manually if necessary!</span></span>
<span></span>
<span><span class="co"># Check row numbers again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span></span>
<span><span class="co">## [1] 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">)</span></span>
<span><span class="co">## [1] 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">## [1] 66</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">## [1] 6</span></span></code></pre></div>
<p>Just as <code><a href="../reference/show_dropouts.html">show_dropouts()</a></code>, the
<code><a href="../reference/delete_dropouts.html">delete_dropouts()</a></code> function also gives detailed information
on all the deleted cases.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">deleted_cases</span><span class="op">$</span><span class="va">full</span><span class="op">)</span></span>
<span><span class="co">##   participant.code session.code  end_app        end_page</span></span>
<span><span class="co">## 1         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 2         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 3         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 4         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 5         1k58kgm7     jk9ekpl0 dictator ResultsWaitPage</span></span>
<span><span class="co">## 6         dhgisush     2wlrl5kb dictator           Offer</span></span>
<span><span class="co">##                           reason</span></span>
<span><span class="co">## 1        ENC. Noticed at: survey</span></span>
<span><span class="co">## 2         ENC. Noticed at: start</span></span>
<span><span class="co">## 3      ENC. Noticed at: dictator</span></span>
<span><span class="co">## 4       ENC. Noticed at: chatapp</span></span>
<span><span class="co">## 5 ENC. Noticed at: all_apps_wide</span></span>
<span><span class="co">## 6        ENC. Noticed at: survey</span></span>
<span></span>
<span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">deleted_cases</span><span class="op">$</span><span class="va">unique</span></span>
<span><span class="co">##    participant.code session.code  end_app        end_page reason</span></span>
<span><span class="co">## 1          1k58kgm7     jk9ekpl0 dictator ResultsWaitPage    ENC</span></span>
<span><span class="co">## 6          dhgisush     2wlrl5kb dictator           Offer    ENC</span></span>
<span><span class="co">## 11         j2g9mcaf     jk9ekpl0 dictator    Introduction    ENC</span></span>
<span><span class="co">## 16         p6m495xi     2wlrl5kb dictator    Introduction    ENC</span></span>
<span></span>
<span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">deleted_cases</span><span class="op">$</span><span class="va">all_end</span></span>
<span><span class="co">##           </span></span>
<span><span class="co">##            Demographics Introduction Offer ResultsWaitPage</span></span>
<span><span class="co">##   dictator            0            2     1               1</span></span>
<span><span class="co">##   survey              4            0     0               0</span></span></code></pre></div>
<p>Caution: This function does not delete any data from the original CSV
and Excel files!</p>
</div>
<div class="section level3">
<h3 id="delete_cases">delete_cases()<a class="anchor" aria-label="anchor" href="#delete_cases"></a>
</h3>
<p>Sometimes, participants ask for their data to be deleted. The
<code><a href="../reference/delete_cases.html">delete_cases()</a></code> function can delete a person from each app’s
data frame, <code>all_apps_wide</code>, and the <code>Time</code> data
frame. Again, data in the <code>Chats</code> data frame must be deleted
by hand.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, check some row numbers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span></span>
<span><span class="co">## [1] 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">)</span></span>
<span><span class="co">## [1] 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">## [1] 66</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">## [1] 6</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete one participant</span></span>
<span><span class="va">person</span> <span class="op">&lt;-</span> <span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.code</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delete_cases.html">delete_cases</a></span><span class="op">(</span><span class="va">otree2</span>,</span>
<span>                       pcodes <span class="op">=</span> <span class="va">person</span>,</span>
<span>                       reason <span class="op">=</span> <span class="st">"requested"</span>,</span>
<span>                       saved_vars <span class="op">=</span> <span class="st">"participant._index_in_pages"</span>,</span>
<span>                       info <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## 1 case(s) deleted. Cases are deleted from all data frames. Except: The list of oTree data frames includes a chat. As the interpretation of chat data depends on how participants engage with each other, the data must be deleted with more care than deleting data in other apps. Hence, this function does not delete data in this data frame. Please do this manually if necessary!</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check row numbers again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span></span>
<span><span class="co">## [1] 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">)</span></span>
<span><span class="co">## [1] 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">## [1] 48</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">## [1] 6</span></span></code></pre></div>
<p>This function adds the information of all these deleted cases to the
previously created information on all deleted cases.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check for all deleted cases (also dropouts):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">deleted_cases</span><span class="op">$</span><span class="va">full</span><span class="op">)</span></span>
<span><span class="co">##    participant.code session.code  end_app     end_page</span></span>
<span><span class="co">## 16         p6m495xi     2wlrl5kb dictator Introduction</span></span>
<span><span class="co">## 17         p6m495xi     2wlrl5kb dictator Introduction</span></span>
<span><span class="co">## 18         p6m495xi     2wlrl5kb dictator Introduction</span></span>
<span><span class="co">## 19         p6m495xi     2wlrl5kb dictator Introduction</span></span>
<span><span class="co">## 20         p6m495xi     2wlrl5kb dictator Introduction</span></span>
<span><span class="co">## 21         sdh9ar2m         &lt;NA&gt;                      </span></span>
<span><span class="co">##                            reason  session participant._index_in_pages</span></span>
<span><span class="co">## 16        ENC. Noticed at: survey     &lt;NA&gt;                          NA</span></span>
<span><span class="co">## 17         ENC. Noticed at: start     &lt;NA&gt;                          NA</span></span>
<span><span class="co">## 18      ENC. Noticed at: dictator     &lt;NA&gt;                          NA</span></span>
<span><span class="co">## 19       ENC. Noticed at: chatapp     &lt;NA&gt;                          NA</span></span>
<span><span class="co">## 20 ENC. Noticed at: all_apps_wide     &lt;NA&gt;                          NA</span></span>
<span><span class="co">## 21                      requested jk9ekpl0                          18</span></span></code></pre></div>
<p>Caution: This function does not delete any data from the original CSV
and Excel files!</p>
</div>
<div class="section level3">
<h3 id="delete_sessions">delete_sessions()<a class="anchor" aria-label="anchor" href="#delete_sessions"></a>
</h3>
<p>While we certainly hope that it never becomes necessary, there may be
instances where an entire session needs to be removed from the data set
due to unforeseen issues. However, if that occurs, we can use the
function <code><a href="../reference/delete_sessions.html">delete_sessions()</a></code>. This function removes not only
the sessions’ data in all apps, <code>all_apps_wide</code>, and the
<code>Time</code> data frame but also the sessions’ chat data in the
<code>Chats</code> data frame because chatting is usually restricted
within a session.</p>
<p>In the following, we see the row numbers before deletion, the
application of the function, and the row numbers after deletion. Apart
from the other functions, the sessions’ entries in the
<code>Chats</code> data frame are destroyed here since chat data occurs
just once per session and may thus be eliminated without impacting the
comprehensibility of the chat data.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, check some row numbers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span></span>
<span><span class="co">## [1] 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">)</span></span>
<span><span class="co">## [1] 3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">## [1] 48</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">## [1] 6</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Delete one session</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delete_sessions.html">delete_sessions</a></span><span class="op">(</span><span class="va">otree</span>,</span>
<span>  scodes <span class="op">=</span> <span class="st">"jk9ekpl0"</span>,</span>
<span>  reason <span class="op">=</span> <span class="st">"Only tests"</span>,</span>
<span>  info <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## 4 case(s) deleted</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check row numbers again</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span></span>
<span><span class="co">## [1] 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">)</span></span>
<span><span class="co">## [1] 4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">## [1] 38</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Chats</span><span class="op">)</span></span>
<span><span class="co">## [1] 3</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="deleting-sensitive-information">Deleting sensitive information<a class="anchor" aria-label="anchor" href="#deleting-sensitive-information"></a>
</h2>
<div class="section level3">
<h3 id="delete_pabels">delete_pabels()<a class="anchor" aria-label="anchor" href="#delete_pabels"></a>
</h3>
<p>It is not uncommon for the participant.label variable to contain
sensitive information like an MTurk worker ID. This can raise serious
privacy concerns. The function <code><a href="../reference/delete_plabels.html">delete_plabels()</a></code>
automatically removes the <code>participant.label</code> variable from
all data frames. Additionally, the function has the option to delete all
MTurk-related variables.</p>
<p>In the following, we see the application of the
<code><a href="../reference/delete_plabels.html">delete_plabels()</a></code> function, preceded by information on the
sensitive variables before running the function and followed by
information on the sensitive variables after running the function.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.label</span><span class="op">)</span></span>
<span><span class="co">## [1] ""        ""        "Person1" "Person2"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.mturk_worker_id</span><span class="op">)</span></span>
<span><span class="co">## [1] NA NA NA NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">$</span><span class="va">participant.label</span><span class="op">)</span></span>
<span><span class="co">## [1] ""        ""        "Person1" "Person2"</span></span>
<span></span>
<span><span class="co"># Delete all participant labels</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delete_plabels.html">delete_plabels</a></span><span class="op">(</span><span class="va">otree2</span>, del_mturk <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.label</span><span class="op">)</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.mturk_worker_id</span><span class="op">)</span></span>
<span><span class="co">## NULL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">$</span><span class="va">participant.label</span><span class="op">)</span></span>
<span><span class="co">## NULL</span></span></code></pre></div>
<p>Caution: This function does not delete the variable from the original
CSV and Excel files!</p>
</div>
</div>
<div class="section level2">
<h2 id="making-ids">Making IDs<a class="anchor" aria-label="anchor" href="#making-ids"></a>
</h2>
<div class="section level3">
<h3 id="make_ids">make_ids()<a class="anchor" aria-label="anchor" href="#make_ids"></a>
</h3>
<p>When working with oTree, participant codes, session codes, and group
IDs are used to identify the cases. However, often, researchers prefer a
streamlined, consecutive numbering system that spans all sessions,
beginning with the first participant, session, or group and concluding
with the last. The <code><a href="../reference/make_ids.html">make_ids()</a></code> function provides a way to
achieve this goal. Before using the function, let us inspect the
underlying variables first.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check variables first</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant.code</span></span>
<span><span class="co">## [1] "dhgisush" "p6m495xi" "c9inx5wl" "kr8yd7f3"</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">session.code</span></span>
<span><span class="co">## [1] "2wlrl5kb" "2wlrl5kb" "mz2r27bk" "mz2r27bk"</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">dictator.1.group.id_in_subsession</span></span>
<span><span class="co">## [1] 1 1 1 1</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make session IDs only</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_ids.html">make_ids</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">)</span></span></code></pre></div>
<p>This function returns the following variables.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check variables</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant_id</span></span>
<span><span class="co">## [1] 1 2 3 4</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">session_id</span></span>
<span><span class="co">## [1] 1 1 2 2</span></span></code></pre></div>
<p>In the prior example, Group IDs were not calculated because group IDs
must be called specifically. Since the group IDs per app in our data do
not match (groups are only relevant in the dictator app), just using
<code>group_id = TRUE</code> would lead to an error message.</p>
<p>For cases where the group IDs vary among apps, it can be specified in
<code><a href="../reference/make_ids.html">make_ids()</a></code> which app or variable should be used for
extracting group information. For instance, the following syntax can be
used to obtain group IDs from the variable
<code>dictator.1.group.id_in_subsession</code> in
<code>all_apps_wide</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get IDs from "from_variable" in the data frame "all_apps_wide"</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_ids.html">make_ids</a></span><span class="op">(</span><span class="va">otree2</span>,</span>
<span>                   <span class="co"># gmake = TRUE,  # Not necessary if from_var is not NULL</span></span>
<span>                   from_var <span class="op">=</span> <span class="st">"dictator.1.group.id_in_subsession"</span><span class="op">)</span></span>
<span><span class="co">## Warning in make_ids(otree2, from_var = "dictator.1.group.id_in_subsession"):</span></span>
<span><span class="co">## The group variable values are constant. Group IDs now correspond to session</span></span>
<span><span class="co">## IDs.</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check variables</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">participant_id</span></span>
<span><span class="co">## [1] 1 2 3 4</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">group_id</span></span>
<span><span class="co">## [1] 1 1 2 2</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">session_id</span></span>
<span><span class="co">## [1] 1 1 2 2</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="calculating-the-time">Calculating the time<a class="anchor" aria-label="anchor" href="#calculating-the-time"></a>
</h2>
<div class="section level3">
<h3 id="apptime">apptime()<a class="anchor" aria-label="anchor" href="#apptime"></a>
</h3>
<p>If we need to determine how much time the participants spent on a
specific app, the <code><a href="../reference/apptime.html">apptime()</a></code> function is a powerful tool
that can help. This function calculates summary statistics such as the
mean, minimum, and maximum time spent on each page, as well as a
detailed list of durations for each participant in the app. The
following example shows how much time the participants spent on the app
‘survey’ in minutes.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the time all participants spent on app "survey"</span></span>
<span><span class="fu"><a href="../reference/apptime.html">apptime</a></span><span class="op">(</span><span class="va">otree2</span>, apps <span class="op">=</span> <span class="st">"survey"</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">## $mean_duration</span></span>
<span><span class="co">## [1] 0.242</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $min_duration</span></span>
<span><span class="co">## [1] 0.233</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $max_duration</span></span>
<span><span class="co">## [1] 0.25</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $single_durations</span></span>
<span><span class="co">##   participant  session duration</span></span>
<span><span class="co">## 1    c9inx5wl mz2r27bk    0.250</span></span>
<span><span class="co">## 2    kr8yd7f3 mz2r27bk    0.233</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $messages</span></span>
<span><span class="co">## [1] "For some participants, no duration could be calculated. See list in $warnings. Did they make it to the app(s)?"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $warnings</span></span>
<span><span class="co">## [1] "dhgisush" "p6m495xi"</span></span></code></pre></div>
<p>We can also get the time for specified individuals only. Without the
specification of the apps, we get their durations for all apps
individually.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the time one participant spent on app "dictator"</span></span>
<span><span class="fu"><a href="../reference/apptime.html">apptime</a></span><span class="op">(</span><span class="va">otree2</span>, pcode <span class="op">=</span> <span class="st">"c9inx5wl"</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">## $chatapp</span></span>
<span><span class="co">## [1] 0.267</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $dictator</span></span>
<span><span class="co">## [1] 0.5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $start</span></span>
<span><span class="co">## [1] 0.017</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $survey</span></span>
<span><span class="co">## [1] 0.25</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="extime">extime()<a class="anchor" aria-label="anchor" href="#extime"></a>
</h3>
<p>If we need to determine how much time participants spent on the
complete experiment, we can use the <code><a href="../reference/extime.html">extime()</a></code> function. This
function calculates summary statistics such as the mean, minimum, and
maximum time spent on the experiment, as well as a detailed list of
durations for each participant. (Note that these min, max, and mean
values only have two digits because of the underlying data.)</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the time that all participants spent on the experiment</span></span>
<span><span class="fu"><a href="../reference/extime.html">extime</a></span><span class="op">(</span><span class="va">otree2</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">## $mean_duration</span></span>
<span><span class="co">## [1] 0.525</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $min_duration</span></span>
<span><span class="co">## [1] 0.05</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $max_duration</span></span>
<span><span class="co">## [1] 1.033</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $single_durations</span></span>
<span><span class="co">##   participant  session duration</span></span>
<span><span class="co">## 2    p6m495xi 2wlrl5kb    0.050</span></span>
<span><span class="co">## 1    dhgisush 2wlrl5kb    0.117</span></span>
<span><span class="co">## 4    kr8yd7f3 mz2r27bk    0.900</span></span>
<span><span class="co">## 3    c9inx5wl mz2r27bk    1.033</span></span></code></pre></div>
<p>We can also get the duration for just one participant.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the time one participant spent on the experiment</span></span>
<span><span class="fu"><a href="../reference/extime.html">extime</a></span><span class="op">(</span><span class="va">otree2</span>, pcode <span class="op">=</span> <span class="st">"c9inx5wl"</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">## [1] 1.033</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pagesec">pagesec()<a class="anchor" aria-label="anchor" href="#pagesec"></a>
</h3>
<p>The older versions of oTree included a variable called
<code>seconds_on_page</code> in the <code>Time</code> data frame.
Although there is a good reason to omit it, we sometimes want to have
more detailed information on the time spent on one page. Therefore, I
created the function <code><a href="../reference/pagesec.html">pagesec()</a></code> that adds a new variable
<code>seconds_on_page2</code> to the <code>Time</code> data frame.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create two new columns: seconds_on_page2 and minutes_on_page</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pagesec.html">pagesec</a></span><span class="op">(</span><span class="va">otree2</span>, rounded <span class="op">=</span> <span class="cn">TRUE</span>, minutes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">Time</span><span class="op">)</span></span>
<span><span class="co">##    timeout_happened is_wait_page group_id session_id participant_id</span></span>
<span><span class="co">## 72                0            0        2          2              3</span></span>
<span><span class="co">## 73                0            0        2          2              4</span></span>
<span><span class="co">## 74                0            0        2          2              4</span></span>
<span><span class="co">## 75                0            0        2          2              3</span></span>
<span><span class="co">## 76                0            0        2          2              4</span></span>
<span><span class="co">## 77                0            0        2          2              3</span></span>
<span><span class="co">##    session_code participant_id_in_session participant_code page_index app_name</span></span>
<span><span class="co">## 72     mz2r27bk                         1         c9inx5wl         15   survey</span></span>
<span><span class="co">## 73     mz2r27bk                         2         kr8yd7f3         15   survey</span></span>
<span><span class="co">## 74     mz2r27bk                         2         kr8yd7f3         16   survey</span></span>
<span><span class="co">## 75     mz2r27bk                         1         c9inx5wl         16   survey</span></span>
<span><span class="co">## 76     mz2r27bk                         2         kr8yd7f3         17   survey</span></span>
<span><span class="co">## 77     mz2r27bk                         1         c9inx5wl         17   survey</span></span>
<span><span class="co">##                  page_name epoch_time_completed round_number minutes_on_page</span></span>
<span><span class="co">## 72 CognitiveReflectionTest           1684258104            1            0.05</span></span>
<span><span class="co">## 73 CognitiveReflectionTest           1684258108            1            0.13</span></span>
<span><span class="co">## 74                   Offer           1684258109            1            0.02</span></span>
<span><span class="co">## 75                   Offer           1684258110            1            0.10</span></span>
<span><span class="co">## 76            Demographics           1684258114            1            0.08</span></span>
<span><span class="co">## 77            Demographics           1684258116            1            0.10</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="transferring-variables-between-the-apps">Transferring variables between the apps<a class="anchor" aria-label="anchor" href="#transferring-variables-between-the-apps"></a>
</h2>
<div class="section level3">
<h3 id="assignv">assignv()<a class="anchor" aria-label="anchor" href="#assignv"></a>
</h3>
<p>The function <code><a href="../reference/assignv.html">assignv()</a></code> copies a variable from the
<code>all_apps_wide</code> data frame to the data frames of all other
apps. In the following example, the variable survey.1.player.gender is
copied from <code>all_apps_wide</code> to all other app data frames; in
all of these data frames, the new variable is named <code>gender</code>.
It also copies the variable to <code>all_apps_wide</code> to keep some
degree of consistency.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assign variable "survey.1.player.gender" and name it "gender"</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assignv.html">assignv</a></span><span class="op">(</span>oTree <span class="op">=</span> <span class="va">otree2</span>,</span>
<span>                 variable <span class="op">=</span> <span class="st">"survey.1.player.gender"</span>,</span>
<span>                 newvar <span class="op">=</span> <span class="st">"gender"</span><span class="op">)</span></span>
<span><span class="co"># Control</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">dictator</span><span class="op">$</span><span class="va">gender</span></span>
<span><span class="co">##  [1] ""       ""       ""       ""       ""       ""       "Female" "Male"  </span></span>
<span><span class="co">##  [9] "Female" "Male"   "Female" "Male"</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">chatapp</span><span class="op">$</span><span class="va">gender</span></span>
<span><span class="co">## [1] ""       ""       "Female" "Male"</span></span>
<span><span class="co"># In app "survey", the variable is now twice because it is taken from here</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">$</span><span class="va">gender</span></span>
<span><span class="co">## [1] ""       ""       "Female" "Male"</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">$</span><span class="va">player.gender</span></span>
<span><span class="co">## [1] ""       ""       "Female" "Male"</span></span>
<span><span class="co"># In app "all_apps_wide," the variable is also there twice</span></span>
<span><span class="co"># (This can be avoided by calling the new variable the same</span></span>
<span><span class="co"># as the old variable)</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">gender</span></span>
<span><span class="co">## [1] ""       ""       "Female" "Male"</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">survey.1.player.gender</span></span>
<span><span class="co">## [1] ""       ""       "Female" "Male"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="assignv_to_aaw">assignv_to_aaw()<a class="anchor" aria-label="anchor" href="#assignv_to_aaw"></a>
</h3>
<p>The function <code><a href="../reference/assignv_to_aaw.html">assignv_to_aaw()</a></code> copies a variable from one
of the data frames to the <code>all_apps_wide</code> data frame. In the
following example, a variable from the app <code>survey</code> is copied
to <code>all_apps_wide</code> and placed directly after the variable
<code>survey.1.player.age</code>.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a new variable</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">$</span><span class="va">younger30</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">survey</span><span class="op">$</span><span class="va">player.age</span> <span class="op">&lt;</span> <span class="fl">30</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get variable younger30 from survey to all_apps_wide</span></span>
<span><span class="co"># and put the new variable right behind the old age variable</span></span>
<span><span class="va">otree2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assignv_to_aaw.html">assignv_to_aaw</a></span><span class="op">(</span><span class="va">otree2</span>,</span>
<span>                        app <span class="op">=</span> <span class="st">"survey"</span>,</span>
<span>                        variable <span class="op">=</span> <span class="st">"younger30"</span>,</span>
<span>                        newvar <span class="op">=</span> <span class="st">"younger30"</span>,</span>
<span>                        resafter <span class="op">=</span> <span class="st">"survey.1.player.age"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Control</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">$</span><span class="va">survey.1.player.age</span></span>
<span><span class="co">## [1] NA NA 66 33</span></span>
<span></span>
<span><span class="co"># Check the position of the old age variable and the new variable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="st">"survey.1.player.age"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] 52</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="st">"younger30"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">otree2</span><span class="op">$</span><span class="va">all_apps_wide</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] 53</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="before-running-the-experiment">Before running the experiment<a class="anchor" aria-label="anchor" href="#before-running-the-experiment"></a>
</h2>
<div class="section level3">
<h3 id="show_constant">show_constant()<a class="anchor" aria-label="anchor" href="#show_constant"></a>
</h3>
<p>When we program experiments, we frequently add variables that turn
out to be useless later. When we forget to remove them, especially in
experiments with numerous rounds, the data frame becomes unreasonably
huge. With the function <code><a href="../reference/show_constant.html">show_constant()</a></code>, we may identify
variables that have no variation and remove them before the experiment.
In the following example, a variable named <code>constant</code> is
created, which does not vary. The function <code><a href="../reference/show_constant.html">show_constant()</a></code>
shows us many variables that are also unchanging; however, we cannot
delete most of them because they are oTree internal. Yet, to prevent an
unreasonably large data frame, we should remove the variable
<code>constant</code> before running the experiment.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a constant column (this variable is usually created in oTree)</span></span>
<span><span class="va">otree2</span><span class="op">$</span><span class="va">dictator</span><span class="op">$</span><span class="va">constant</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span></span>
<span><span class="co"># Show all columns that contain columns containing only one specified value</span></span>
<span><span class="fu"><a href="../reference/show_constant.html">show_constant</a></span><span class="op">(</span>oTree <span class="op">=</span> <span class="va">otree2</span><span class="op">)</span></span>
<span><span class="co">## $all_apps_wide</span></span>
<span><span class="co">##  [1] "participant._is_bot"                         </span></span>
<span><span class="co">##  [2] "participant._max_page_index"                 </span></span>
<span><span class="co">##  [3] "participant.visited"                         </span></span>
<span><span class="co">##  [4] "session.label"                               </span></span>
<span><span class="co">##  [5] "session.comment"                             </span></span>
<span><span class="co">##  [6] "session.config.real_world_currency_per_point"</span></span>
<span><span class="co">##  [7] "session.config.name"                         </span></span>
<span><span class="co">##  [8] "session.config.participation_fee"            </span></span>
<span><span class="co">##  [9] "start.1.player.role"                         </span></span>
<span><span class="co">## [10] "start.1.player.payoff"                       </span></span>
<span><span class="co">## [11] "start.1.group.id_in_subsession"              </span></span>
<span><span class="co">## [12] "start.1.subsession.round_number"             </span></span>
<span><span class="co">## [13] "dictator.1.player.role"                      </span></span>
<span><span class="co">## [14] "dictator.1.group.id_in_subsession"           </span></span>
<span><span class="co">## [15] "dictator.1.subsession.round_number"          </span></span>
<span><span class="co">## [16] "dictator.2.player.role"                      </span></span>
<span><span class="co">## [17] "dictator.2.group.id_in_subsession"           </span></span>
<span><span class="co">## [18] "dictator.2.subsession.round_number"          </span></span>
<span><span class="co">## [19] "dictator.3.player.role"                      </span></span>
<span><span class="co">## [20] "dictator.3.group.id_in_subsession"           </span></span>
<span><span class="co">## [21] "dictator.3.subsession.round_number"          </span></span>
<span><span class="co">## [22] "chatapp.1.player.role"                       </span></span>
<span><span class="co">## [23] "chatapp.1.player.payoff"                     </span></span>
<span><span class="co">## [24] "chatapp.1.group.id_in_subsession"            </span></span>
<span><span class="co">## [25] "chatapp.1.subsession.round_number"           </span></span>
<span><span class="co">## [26] "survey.1.player.role"                        </span></span>
<span><span class="co">## [27] "survey.1.player.payoff"                      </span></span>
<span><span class="co">## [28] "survey.1.group.id_in_subsession"             </span></span>
<span><span class="co">## [29] "survey.1.subsession.round_number"            </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $chatapp</span></span>
<span><span class="co">## [1] "session.comment"             "participant._is_bot"        </span></span>
<span><span class="co">## [3] "participant._max_page_index" "participant.visited"        </span></span>
<span><span class="co">## [5] "player.role"                 "player.payoff"              </span></span>
<span><span class="co">## [7] "group.id_in_subsession"      "subsession.round_number"    </span></span>
<span><span class="co">## [9] "session.label"              </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $dictator</span></span>
<span><span class="co">## [1] "session.comment"             "participant._is_bot"        </span></span>
<span><span class="co">## [3] "participant._max_page_index" "participant.visited"        </span></span>
<span><span class="co">## [5] "player.role"                 "group.id_in_subsession"     </span></span>
<span><span class="co">## [7] "session.label"               "constant"                   </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $start</span></span>
<span><span class="co">## [1] "session.comment"             "participant._is_bot"        </span></span>
<span><span class="co">## [3] "participant._max_page_index" "participant.visited"        </span></span>
<span><span class="co">## [5] "player.role"                 "player.payoff"              </span></span>
<span><span class="co">## [7] "group.id_in_subsession"      "subsession.round_number"    </span></span>
<span><span class="co">## [9] "session.label"              </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $survey</span></span>
<span><span class="co">## [1] "session.comment"             "participant._is_bot"        </span></span>
<span><span class="co">## [3] "participant._max_page_index" "participant.visited"        </span></span>
<span><span class="co">## [5] "player.role"                 "player.payoff"              </span></span>
<span><span class="co">## [7] "group.id_in_subsession"      "subsession.round_number"    </span></span>
<span><span class="co">## [9] "session.label"              </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $Time</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $Chats</span></span>
<span><span class="co">## [1] "group_id"     "session_id"   "session_code" "channel"</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p><a href="impressum.html">Site notice</a></p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
